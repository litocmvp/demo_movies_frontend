"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[463],{5359:function(e,t,i){i.r(t),i.d(t,{default:function(){return P}});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("loading",{attrs:{active:e.vueLoading.isLoading,"can-cancel":!1,"is-full-page":e.vueLoading.fullPage,loader:e.vueLoading.loader,transition:e.vueLoading.transition,color:e.vueLoading.color,height:e.vueLoading.height,width:e.vueLoading.width,"background-color":e.vueLoading.bgColor,opacity:e.vueLoading.opacity,"enforce-focus":!0,"lock-scroll":!0,blur:e.vueLoading.blur}}),i("div",{staticClass:"row justify-content-center m-4"},[i("div",{staticClass:"d-flex"},[e._m(0),i("div",{staticClass:"d-inline mx-2"},[i("i",{staticClass:"bi bi-caret-down-square",attrs:{role:"button",id:"ratingbtn","data-bs-toggle":"popover","data-bs-trigger":"hover focus","data-bs-content":"Minimizar Sección"},on:{click:function(t){return e.hidden("ratingbtn","ratingsbox")}}})]),e._m(1)]),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row row-cols-1 row-cols-md-3 g-1 animate__animated",attrs:{id:"ratingsbox"}},e._l(e.ratings,(function(t){return i("div",{directives:[{name:"scroll-reveal",rawName:"v-scroll-reveal.reset",value:{delay:250},expression:"{ delay: 250 }",modifiers:{reset:!0}}],key:t.id,staticClass:"col hvr-grow"},[i("div",{staticClass:"card bg-dark text-white h-100 hovereffect"},[i("img",{staticClass:"card-img",attrs:{src:t.picture,alt:"..."}}),i("div",{staticClass:"card-img-overlay transbox"},[i("h5",{staticClass:"card-title"},[e._v(e._s(t.rating))]),i("p",{staticClass:"card-text"},[e._v(e._s(t.description))]),i("div",{staticClass:"overlay"},[i("button",{staticClass:"btn btn-outline-warning mx-3",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#modalModify"},on:{click:function(i){return e.modifyModel("titleLabel","Modificación de Clasificación Cinematográfica","hiddenId","rating/"+t.id,"titleID",t.rating,"descriptionID",t.description,"pictureID",t.picture)}}},[i("i",{staticClass:"bi bi-input-cursor-text"}),e._v(" Modificar ")]),i("button",{staticClass:"btn btn-outline-danger mx-3",attrs:{type:"button"},on:{click:function(i){return e.deleteItem("rating/"+t.id)}}},[i("i",{staticClass:"bi bi-file-earmark-x"}),e._v(" Eliminar ")])])])])])})),0)]),e._v(" "+e._s(e.updateRatings)+" ")]),i("div",{staticClass:"row justify-content-center m-4"},[i("div",{staticClass:"d-flex"},[e._m(2),i("div",{staticClass:"d-inline mx-2"},[i("i",{staticClass:"bi bi-caret-down-square",attrs:{role:"button",id:"genderbtn","data-bs-toggle":"popover","data-bs-trigger":"hover focus","data-bs-content":"Minimizar Sección"},on:{click:function(t){return e.hidden("genderbtn","gendersbox")}}})]),e._m(3)]),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row row-cols-1 row-cols-md-3 g-1 animate__animated",attrs:{id:"gendersbox"}},e._l(e.genders,(function(t){return i("div",{directives:[{name:"scroll-reveal",rawName:"v-scroll-reveal.reset",value:{delay:250},expression:"{ delay: 250 }",modifiers:{reset:!0}}],key:t.id,staticClass:"col hvr-grow"},[i("div",{staticClass:"card bg-dark text-white h-100 hovereffect"},[i("img",{staticClass:"card-img",attrs:{src:t.picture,alt:"..."}}),i("div",{staticClass:"card-img-overlay transbox"},[i("h5",{staticClass:"card-title"},[e._v(e._s(t.gender))]),i("p",{staticClass:"card-text"},[e._v(e._s(t.description))]),i("div",{staticClass:"overlay"},[i("button",{staticClass:"btn btn-outline-warning mx-3",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#modalModify"},on:{click:function(i){return e.modifyModel("titleLabel","Modificación de Género Cinematográfico","hiddenId","gender/"+t.id,"titleID",t.gender,"descriptionID",t.description,"pictureID",t.picture)}}},[i("i",{staticClass:"bi bi-input-cursor-text"}),e._v(" Modificar ")]),i("button",{staticClass:"btn btn-outline-danger mx-3",attrs:{type:"button"},on:{click:function(i){return e.deleteItem("gender/"+t.id)}}},[i("i",{staticClass:"bi bi-file-earmark-x"}),e._v(" Eliminar ")])])])])])})),0)]),e._v(" "+e._s(e.updateGenders)+" ")]),i("NewBasicFutureMoviesComponetVue",{attrs:{modalID:"modalRating",titleID:"ratingLabel",title:"Formulario de Registro de Clasificación Cinematográfica",inputName:"Titulo de la Clasificación",inputNameID:"clasificacionID",inputDescription:"Breve Descripción de la Clasificación",inputDescriptionID:"newRatingDescID",inputPicture:"Dirección web (URL) de la imagen con relación a la clasificación",inputPictureID:"newRatingPicID",btnClose:"closeRating",urlBackend:"rating"},on:{update_loading:e.updateVueLoading}}),i("NewBasicFutureMoviesComponetVue",{attrs:{modalID:"modalGender",titleID:"genderLabel",title:"Formulario de Registro de Genero Cinematográfico",inputName:"Titulo del Genero",inputNameID:"generoID",inputDescription:"Breve Descripción del Genero",inputDescriptionID:"newGenderDescID",inputPicture:"Dirección web (URL) de la imagen con relación al genero",inputPictureID:"newGenderPicID",btnClose:"closeGender",urlBackend:"gender"},on:{update_loading:e.updateVueLoading}}),i("NewBasicFutureMoviesComponetVue",{attrs:{modalID:"modalModify",title:"Formulario de Modificación",inputName:"Titulo",inputDescription:"Descripción",inputPicture:"Dirección web (URL) de la imagen",btnClose:"closeModify",btnAction:"modify",methodHttp:"Put"},on:{update_loading:e.updateVueLoading}})],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-inline mx-2"},[i("h3",{staticClass:"text-muted fst-italic text-cencer"},[e._v("Clasificaciones Cinematográficas")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-inline mx-4",attrs:{"data-bs-toggle":"modal","data-bs-target":"#modalRating"}},[i("i",{staticClass:"bi bi-plus-circle",attrs:{role:"button","data-bs-toggle":"popover","data-bs-trigger":"hover focus","data-bs-content":"Registrar Nueva Clasificación Cinematográfica"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-inline mx-2"},[i("h3",{staticClass:"text-muted fst-italic text-cencer"},[e._v("Géneros Cinematográficos")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-inline mx-4",attrs:{"data-bs-toggle":"modal","data-bs-target":"#modalGender"}},[i("i",{staticClass:"bi bi-plus-circle",attrs:{role:"button","data-bs-toggle":"popover","data-bs-trigger":"hover focus","data-bs-content":"Registrar Nuevo Género Cinematográfico"}})])}],s=(i(6699),i(615)),n=i(6166),o=i.n(n),c=i(3233),d=i.n(c),l=i(5457),u=i(7924),m=i(6825),g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal fade",attrs:{id:e.modalID,tabindex:"-1","aria-labelledby":e.titleID,"aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title",attrs:{id:e.titleID}},[e._v(e._s(e.title))]),i("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),i("div",{staticClass:"modal-body"},["save"===e.btnAction?i("form",{staticClass:"row"},[i("div",{staticClass:"mb-3 col-12"},[e._v(" "+e._s(e.inputName)+" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.featureName.$model,expression:"$v.featureName.$model",modifiers:{trim:!0}}],ref:"featureName",staticClass:"form-control form-control-sm",class:{border:e.$v.featureName.$error,"border-danger":e.$v.featureName.$error},attrs:{id:e.inputNameID,"aria-label":e.inputNameID,type:"text"},domProps:{value:e.$v.featureName.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.featureName,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e.$v.featureName.required?e._e():i("div",{staticClass:"text-danger"},[e._v(" ingrese el Titulo ")])]),i("div",{staticClass:"mb-3 col-12"},[e._v(" "+e._s(e.inputDescription)+" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.$v.featureDescription.$model,expression:"$v.featureDescription.$model"}],ref:"featureDescription",staticClass:"form-control form-control-sm",class:{border:e.$v.featureDescription.$error,"border-danger":e.$v.featureDescription.$error},attrs:{id:e.inputDescriptionID,"aria-label":e.inputDescriptionID,col:"3",rows:"3"},domProps:{value:e.$v.featureDescription.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.featureDescription,"$model",t.target.value)}}}),e.$v.featureDescription.required?e._e():i("div",{staticClass:"text-danger"},[e._v(" ingrese la Descripción ")]),e.$v.featureDescription.minLength&&e.$v.featureDescription.maxLength?e._e():i("div",{staticClass:"text-danger"},[e._v(" la descripcion debe contener al menos "+e._s(e.$v.featureDescription.$params.minLength.min)+" caracteres y maximo "+e._s(e.$v.featureDescription.$params.maxLength.max)+" ")])]),i("div",{staticClass:"mb-3 col-12"},[e._v(" "+e._s(e.inputPicture)+" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.featurePicture.$model,expression:"$v.featurePicture.$model",modifiers:{trim:!0}}],ref:"featurePicture",staticClass:"form-control form-control-sm",class:{border:e.$v.featurePicture.$error,"border-danger":e.$v.featurePicture.$error},attrs:{id:e.inputPictureID,"aria-label":e.inputPictureID,type:"text"},domProps:{value:e.$v.featurePicture.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.featurePicture,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("div",{staticClass:"d-flex justify-content-center mt-1"},[i("img",{ref:"imgPreview",attrs:{src:e.srcImage,alt:"preview_default",width:"200",height:"auto"}})]),e.$v.featurePicture.required?e._e():i("div",{staticClass:"text-danger"},[e._v(" ingrese la URL de la imagen con relación al registro ")]),e.$v.featurePicture.url?e._e():i("div",{staticClass:"text-danger"},[e._v(" dirección URL erronea ")])])]):i("form",{staticClass:"row"},[i("div",{staticClass:"mb-3 col-12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.featureId,expression:"featureId"}],staticClass:"form-control form-control-sm",attrs:{id:"hiddenId",name:"hiddenItem",type:"hidden"},domProps:{value:e.featureId},on:{input:function(t){t.target.composing||(e.featureId=t.target.value)}}})]),i("div",{staticClass:"mb-3 col-12"},[e._v(" "+e._s(e.inputName)+" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.featureName.$model,expression:"$v.featureName.$model",modifiers:{trim:!0}}],ref:"featureName",staticClass:"form-control form-control-sm",class:{border:e.$v.featureName.$error,"border-danger":e.$v.featureName.$error},attrs:{id:e.inputNameID,"aria-label":e.inputNameID,type:"text"},domProps:{value:e.$v.featureName.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.featureName,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e.$v.featureName.required?e._e():i("div",{staticClass:"text-danger"},[e._v(" ingrese el Titulo ")])]),i("div",{staticClass:"mb-3 col-12"},[e._v(" "+e._s(e.inputDescription)+" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.$v.featureDescription.$model,expression:"$v.featureDescription.$model"}],ref:"featureDescription",staticClass:"form-control form-control-sm",class:{border:e.$v.featureDescription.$error,"border-danger":e.$v.featureDescription.$error},attrs:{id:e.inputDescriptionID,"aria-label":e.inputDescriptionID,col:"3",rows:"3"},domProps:{value:e.$v.featureDescription.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.featureDescription,"$model",t.target.value)}}}),e.$v.featureDescription.required?e._e():i("div",{staticClass:"text-danger"},[e._v(" ingrese la Descripción ")]),e.$v.featureDescription.minLength&&e.$v.featureDescription.maxLength?e._e():i("div",{staticClass:"text-danger"},[e._v(" la descripcion debe contener al menos "+e._s(e.$v.featureDescription.$params.minLength.min)+" caracteres y maximo "+e._s(e.$v.featureDescription.$params.maxLength.max)+" ")])]),i("div",{staticClass:"mb-3 col-12"},[e._v(" "+e._s(e.inputPicture)+" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.featurePicture.$model,expression:"$v.featurePicture.$model",modifiers:{trim:!0}}],ref:"featurePicture",staticClass:"form-control form-control-sm",class:{border:e.$v.featurePicture.$error,"border-danger":e.$v.featurePicture.$error},attrs:{id:e.inputPictureID,"aria-label":e.inputPictureID,type:"text"},domProps:{value:e.$v.featurePicture.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.featurePicture,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("div",{staticClass:"d-flex justify-content-center mt-1"},[i("img",{ref:"imgPreview",attrs:{src:e.srcImage,alt:"preview_default",width:"200",height:"auto"}})]),e.$v.featurePicture.required?e._e():i("div",{staticClass:"text-danger"},[e._v(" ingrese la URL de la imagen con relación al registro ")]),e.$v.featurePicture.url?e._e():i("div",{staticClass:"text-danger"},[e._v(" dirección URL erronea ")])])])]),i("div",{staticClass:"modal-footer"},["save"===e.btnAction?i("div",[i("button",{staticClass:"btn btn-secondary mx-1",attrs:{type:"button","data-bs-dismiss":"modal",id:e.btnClose}},[e._v("Cerrar")]),i("button",e._b({staticClass:"btn btn-primary mx-1",attrs:{type:"submit"},on:{click:e.saveData}},"button",e.buttonAttr,!1),[e._v("Guardar Registro")])]):i("div",[i("button",{staticClass:"btn btn-secondary mx-1",attrs:{type:"button","data-bs-dismiss":"modal",id:e.btnClose}},[e._v("Cerrar")]),i("button",e._b({staticClass:"btn btn-warning mx-1",attrs:{type:"submit"},on:{click:e.modifyData}},"button",e.buttonAttr,!1),[e._v("Modificar Registro")])])])])])])},p=[],f=i(6409);const v="https://cmvpmovie.pythonanywhere.com/api/v1.0/",b=i(366);var h={name:"BasicFuturesMovie",props:{modalID:String,titleID:{type:String,default:"titleLabel"},title:String,inputName:String,inputNameID:{type:String,default:"titleID"},inputDescription:String,inputDescriptionID:{type:String,default:"descriptionID"},inputPicture:String,inputPictureID:{type:String,default:"pictureID"},btnClose:String,btnAction:{type:String,default:"save"},urlBackend:String,methodHttp:{type:String,default:"Post"}},data(){return{featureId:null,featureName:null,featureDescription:null,featurePicture:null,srcImage:b}},validations:{featureName:{required:f.C1},featureDescription:{required:f.C1,minLength:(0,f.Ei)(10),maxLength:(0,f.BS)(254)},featurePicture:{required:f.C1,url:f.HQ}},methods:{async saveData(){if(0==this.featureName?.length||!this.featureName)return(0,l.w)("warning","Por favor ingresa el titulo"),void this.$refs.featureName.focus();if(0==this.featureDescription?.length||!this.featureDescription)return(0,l.w)("warning","Por favor ingresa la descripción"),void this.$refs.featureDescription.focus();if(0==this.featurePicture?.length||!this.featurePicture)return(0,l.w)("warning","Por favor ingresa la imagen"),void this.$refs.featurePicture.focus();this.$emit("update_loading",!0);const e={method:this.methodHttp,url:`${v}cinema/${this.urlBackend}`,data:{name:this.featureName,description:this.featureDescription,picture:this.featurePicture}};this.urlBackend.includes("rating")?delete Object.assign(e.data,{["rating"]:e.data["name"]})["name"]:delete Object.assign(e.data,{["gender"]:e.data["name"]})["name"],await o()(e).then((e=>{this.$emit("update_loading",!1),(0,l.w)(e.data.icon,e.data.msg);const t=e.data.record;document.getElementById(this.btnClose).click(),this.urlBackend.includes("rating")?s.Z.state.ratings.push(t):s.Z.state.genders.push(t),this.featureName="",this.featureDescription="",this.featurePicture=""})).catch((e=>{this.$emit("update_loading",!1),(0,l.w)("error",`${e.response.data.msg}, status: ${e.response.status}`)}))},async modifyData(){this.$emit("update_loading",!0);const e={method:this.methodHttp,url:`${v}cinema/${this.featureId}`,data:{name:this.featureName,description:this.featureDescription,picture:this.featurePicture}};this.featureId.includes("rating")?delete Object.assign(e.data,{["rating"]:e.data["name"]})["name"]:delete Object.assign(e.data,{["gender"]:e.data["name"]})["name"],await o()(e).then((e=>{this.$emit("update_loading",!1);const t=e.data.record;if((0,l.w)(e.data.icon,e.data.msg),document.getElementById(this.btnClose).click(),this.featureId.includes("rating")){let e=s.Z.state.ratings;e:for(let i=0;i<e.length;i+=1){let a=e[i];for(const[e,r]of Object.entries(a))if("id"==e&&String(r)==t.id){s.Z.state.ratings[i].rating=t.rating,s.Z.state.ratings[i].description=t.description,s.Z.state.ratings[i].picture=t.picture;break e}}}else{let e=s.Z.state.genders;e:for(let i=0;i<=e.length;i+=1){let a=e[i];for(const[e,r]of Object.entries(a))if("id"==e&&String(r)==t.id){s.Z.state.genders[i].rating=t.gender,s.Z.state.genders[i].description=t.description,s.Z.state.genders[i].picture=t.picture;break e}}}})).catch((e=>{this.$emit("update_loading",!1),(0,l.w)("error",`${e.response.data.msg}, status: ${e.response.status}`)}))}},computed:{buttonAttr(){return!0===(this.$v.featureName.$error||this.$v.featureDescription.$error||this.$v.featurePicture.$error)?{disabled:!0}:{disabled:!1}}},watch:{featurePicture(e){if(e.length>0)return this.srcImage=e;this.srcImage=b}}},$=h,C=i(1001),D=(0,C.Z)($,g,p,!1,null,null,null),_=D.exports;const w="https://cmvpmovie.pythonanywhere.com/api/v1.0/";var I={name:"BasicFeatureMovieView",created(){document.title="CMVP Movies Demo - Basic Features"},components:{NewBasicFutureMoviesComponetVue:_,Loading:d()},data(){return{ratings:[],genders:[],vueLoading:{loader:"bars",isLoading:!1,fullPage:!0,transition:"fade",color:"#007BFF",height:"128",width:"128",bgColor:"#000",opacity:"0.9",blur:"2px"}}},methods:{async allRatings(){await s.Z.dispatch("getRating"),s.Z.state.ratings&&(this.ratings=s.Z.state.ratings)},async allGenders(){await s.Z.dispatch("getGender"),s.Z.state.genders&&(this.genders=s.Z.state.genders)},hidden(e,t){return(0,m.Z)(e,t)},modifyModel(e,t,i,a,r,s,n,o,c,d){document.getElementById(e).innerText=t,document.getElementById(i).value=a,document.getElementById(r).value=s,document.getElementById(n).value=o,document.getElementById(c).value=d,document.getElementById(i).dispatchEvent(new Event("input")),document.getElementById(r).dispatchEvent(new Event("input")),document.getElementById(n).dispatchEvent(new Event("input")),document.getElementById(c).dispatchEvent(new Event("input"))},async deleteItem(e){let t=await(0,l.j)("¿Estas seguro de eliminarlo?");if(t){this.vueLoading.isLoading=!0;const t=e.match(/(\d+)/),i={method:"Delete",url:`${w}cinema/${e}`};o()(i).then((i=>{if(this.vueLoading.isLoading=!1,(0,l.w)(i.data.icon,i.data.msg),e.includes("rating")){let e=s.Z.state.ratings;e:for(let i=0;i<e.length;i+=1){let a=e[i];for(const[e,r]of Object.entries(a))if("id"==e&&String(r)==t[0]){s.Z.state.ratings.splice(i,1);break e}}}else{let e=s.Z.state.genders;e:for(let i=0;i<e.length;i+=1){let a=e[i];for(const[e,r]of Object.entries(a))if("id"==e&&String(r)==t[0]){s.Z.state.genders.splice(i,1);break e}}}})).catch((e=>{this.vueLoading.isLoading=!1,(0,l.w)("error",`${e.response.data.msg}, status: ${e.response.status}`)}))}},updateVueLoading(e){this.vueLoading.isLoading=e}},computed:{updateRatings:function(){this.ratings=s.Z.state.ratings},updateGenders:function(){this.genders=s.Z.state.genders}},beforeMount(){this.allRatings(),this.allGenders()},beforeUpdate(){(0,u.Z)()}},x=I,y=(0,C.Z)(x,a,r,!1,null,null,null),P=y.exports},6825:function(e,t){function i(e,t){const i=document.getElementById(e),a=document.getElementById(t);a.classList.contains("d-none")?(i.classList.remove("bi-caret-up-square"),i.classList.add("bi-caret-down-square"),a.classList.remove("animate__fadeOutUp"),a.classList.remove("d-none"),a.classList.add("animate__fadeInDown"),i.hasAttribute("data-bs-content")&&i.setAttribute("data-bs-content","Minimizar Sección")):(i.classList.remove("bi-caret-down-square"),i.classList.add("bi-caret-up-square"),a.classList.remove("animate__fadeInDown"),a.classList.add("animate__fadeOutUp"),window.setTimeout((()=>{a.classList.add("d-none")}),750),i.hasAttribute("data-bs-content")&&i.setAttribute("data-bs-content","Maximizar Sección"))}t["Z"]=i},7924:function(e,t){function i(){const e=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));e.map((function(e){return new bootstrap.Popover(e)}))}t["Z"]=i},366:function(e,t,i){e.exports=i.p+"img/preview.6adab160.jpg"}}]);
//# sourceMappingURL=features.d0c6239a.js.map